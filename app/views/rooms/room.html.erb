<div class="container vh-100 bg-dark">
    <% if @single_room %>
        <div class="d-flex justify-content-between">
            <%= link_to 'back', root_url %>

            <% if @single_room.is_active == false %>
                <%= form_with url: room_path(@single_room), method: "patch" do |f| %>
                    <%= f.hidden_field :state, :value => true %>
                    <%= f.submit 'Start Game' %>
                <% end %>
            <% else %>
                <%= form_with url: room_path(@single_room), method: "patch" do |f| %>
                    <%= f.hidden_field :state, :value => false %>
                    <%= f.submit 'End Game' %>
                <% end %>
            <% end %>

        </div>

        <h1><%= @single_room.name %></h1>
        <h3>Created by: <%= @single_room.user.username %></h3>
        <hr>
        <% if @is_groupcreator %>
            <%= form_with url: room_path(@single_room), method: "delete" do |f| %>
                <%= f.hidden_field :id, :value => @single_room.id %>
                <%= f.submit 'delete group' %>
            <% end %>
        <% else %>
            <% if @is_groupparticipant %>
                <%= render partial: 'layouts/leave_room_form' %>
            <% else %>
                <%= render partial: 'layouts/join_room_form' %>
            <% end %>
        <% end %>
        
        <h3><u>Group Participants</u></h3>
        <% if @groupparticipants.exists? %>
            <% @groupparticipants.each do |groupparticipants| %>
                <%= groupparticipants.username %>
            <% end %>
        <% else %>
            <h4>No Participants</h4>
        <% end%>

        
    <% end %>
    <hr>
    <%= turbo_stream_from @single_room %>
    <div id="messages">
        <%= render @messages %>
    </div>
    <%= render partial: 'layouts/new_message_form' %>
</div>